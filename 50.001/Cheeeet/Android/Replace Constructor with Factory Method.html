<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <meta charset="utf-8">
    <title>Replace Constructor with Factory Method</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="alternate" href="https://refactoring.guru/replace-constructor-with-factory-method" hreflang="x-default"/>
    <link rel="alternate" href="https://refactoring.guru/ru/replace-constructor-with-factory-method" hreflang="ru"/>
    <link rel="alternate" href="https://refactoring.guru/uk/replace-constructor-with-factory-method" hreflang="uk"/>

    <meta name="description" content="Problem: You have a complex constructor that does something more than just setting parameter values in object fields.
Solution: Create a factory method and use it to replace constructor calls.
">

    <link rel="canonical" href="https://refactoring.guru/replace-constructor-with-factory-method"/>

    <link rel="icon" type="image/x-icon" href="https://refactoring.guru/favicon.ico"/>

            <style>.async-hide { opacity: 0 !important} </style>
    <script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
            h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
            (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
        })(window,document.documentElement,'async-hide','dataLayer',4000,
            {'GTM-M58XZN4':true});</script>
        <script>
        window.google_analytics = 'UA-521840-40';

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-521840-40', {
            'siteSpeedSampleRate': 100
        });
                ga('require', 'GTM-M58XZN4');
        window.google_optimize = 'GTM-M58XZN4';
                                ga('require', 'ec');
        ga('send', 'pageview');
    </script>

<meta property="fb:app_id" content="666819623386327" />
<meta property="og:type"  content="website" />
<meta property="og:image" content="https://refactoring.guru/images/refactoring/social/facebook-share-preview.png"/>

<link href="https://refactoring.guru/css/public.min.css?id=3716ae6e66815c287299" rel="stylesheet">
        </head>
<body class=" announcement  replace-constructor-with-factory-method" data-body_class="replace-constructor-with-factory-method">

            <div class="announcement-block prom" data-id="DIDP-announcement" data-creative-id="en" data-position="top">🎉 Hooray! After 3 years of work, I've finally released the ebook on design patterns! <a href="/design-patterns/book">Check it out »</a></div>
    
    <div class="cart-placeholder"></div>

    <main role="main" class="main-content top-content center-content " data-page_class="">
        <div class="main-content-container center-content-container">
                        <div class="refactoring page text">
<article>
    <div class="breadcrumb">
                                    <a class="home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a>
                                                / <a class="type" href="/refactoring">Refactoring</a>
                                                / <a class="type" href="/refactoring/techniques">Techniques</a>
                                                / <a class="type" href="/refactoring/techniques/simplifying-method-calls">Simplifying Method Calls</a>
                        </div>
    <h1 class="title">Refactoring Replace Constructor with Factory Method</h1>
            <script type="text/javascript">
            // Shorten examples titles for users.
            var h1 = document.getElementsByTagName("H1")[0];
            var title = h1.innerHTML;
            title = title.replace(/^Refactoring (.*)$/, '$1');
            h1.innerHTML = title;
        </script>
        <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight > 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '<strong>$1:</strong> $2');
        h1.innerHTML = title;
    </script>

    

    <div class="before-after-container">
        <div class="before">
            <h3>Problem</h3>
            <p>You have a complex constructor that does something more than just setting parameter values in object fields.</p>

        </div>
        <div class="after">
            <h3>Solution</h3>
            <p>Create a factory method and use it to replace constructor calls.</p>

        </div>
    </div>

        <div class="examples">
                    <div class="before-after before-after-container java" data-lang="java">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="java">class Employee {
  Employee(int type) {
    this.type = type;
  }
  //...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="java">class Employee {
  static Employee create(int type) {
    employee = new Employee(type);
    // do some heavy lifting.
    return employee;
  }
  //...
}</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container csharp" data-lang="csharp">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="csharp">public class Employee 
{
  public Employee(int type) 
  {
    this.type = type;
  }
  //...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="csharp">public class Employee
{
  public static Employee Create(int type)
  {
    employee = new Employee(type);
    // do some heavy lifting.
    return employee;
  }
  //...
}</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container php" data-lang="php">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="php">class Employee {
  ...
  function __construct($type) {
   $this-&gt;type = $type;
  }
  ...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="php">class Employee {
  ...
  static function create($type) {
    $employee = new Employee($type);
    // do some heavy lifting.
    return $employee;
  }
  ...
}</pre>
                                    </div>
            </div>
                    <div class="before-after before-after-container typescript" data-lang="typescript">
                <div class="before">
                    <div class="ba">Before</div>
                                            <pre class="code" lang="typescript">class Employee {
  constructor(type: number) {
    this.type = type;
  }
  //...
}</pre>
                                    </div>
                <div class="after">
                    <div class="ba">After</div>
                                            <pre class="code" lang="typescript">class Employee {
  static create(type: number): Employee {
    let employee = new Employee(type);
    // do some heavy lifting.
    return employee;
  }
  //...
}</pre>
                                    </div>
            </div>
            </div>
    
    <h3>Why Refactor</h3>
<p>The most obvious reason for using this refactoring technique is related to <a href="/replace-type-code-with-subclasses">Replace Type Code with Subclasses</a>.</p>
<p>You have code in which a object was previously created and the value of the coded type was passed to it. After use of the refactoring method, several subclasses have appeared and from them you need to create objects depending on the value of the coded type. Changing the original constructor to make it return subclass objects is impossible, so instead we create a static factory method that will return objects of the necessary classes, after which it replaces all calls to the original constructor.</p>
<p>Factory methods can be used in other situations as well, when constructors aren’t up to the task. They can be important when attempting to <a href="/change-value-to-reference">Change Value to Reference</a>. They can also be used to set various creation modes that go beyond the number and types of parameters.</p>
<h3>Benefits</h3>
<ul>
<li>
<p>A factory method doesn’t necessarily return an object of the class in which it was called. Often these could be its subclasses, selected based on the arguments given to the method.</p>
</li>
<li>
<p>A factory method can have a better name that describes what and how it returns what it does, for example <code>Troops::GetCrew(myTank)</code>.</p>
</li>
<li>
<p>A factory method can return an already created object, unlike a constructor, which always creates a new instance.</p>
</li>
</ul>
<h3>How to Refactor</h3>
<ol>
<li>
<p>Create a factory method. Place a call to the current constructor in it.</p>
</li>
<li>
<p>Replace all constructor calls with calls to the factory method.</p>
</li>
<li>
<p>Declare the constructor private.</p>
</li>
<li>
<p>Investigate the constructor code and try to isolate the code not directly related to constructing an object of the current class, moving such code to the factory method.</p>
</li>
</ol>


    <div class="prom banner-content banner banner-striped banner-with-image" data-id="Ref: Part of the ebook" data-creative-id="animated-en" data-position="content_bottom">
        
            
                
            
        

        <div class="banner-image">
            <a href="/refactoring/course">
                <video id="banner-zzz" loop muted playsinline width=200 height=200>
                    <source src="/images/refactoring/banners/tired-of-reading-banner-1x.mp4" type="video/mp4">
                    <source src="/images/refactoring/banners/tired-of-reading-banner.png" type="image/png">
                    Your browser does not support HTML video.
                </video>
            </a>
        </div>
        <script>
            if (/CPU (?:iPhone )?OS [1-9]_/.test(navigator.userAgent)) {
                // Don't autoplay on old iOS, since it doesn not support playsinline.
            }
            else {
                document.getElementById('banner-zzz').play();
            }
        </script>

        <div class="banner-text">
            <h3 class="title">Tired of reading?</h3>
            <p class="big">No wonder, it takes <span class="blue">7 hours</span> to read all of the text we have here.</p>
            <p>Try our interactive course on refactoring. It offers a less tedious approach to learning new stuff.</p>
            <a class="btn btn-featured" href="/refactoring/course"><i class="fa fa-star" aria-hidden="true"></i> Let's see...</a>
        </div>
</div>


    </article>

    <nav class="relations link-list">
        <div class="row">
                            <div class="col-xs-12 col-sm-6 col-lg-6">
                    <h3>Helps other refactorings</h3>
                                            <div class="dl">
                                                            <div class="dt"><a href="/change-value-to-reference">Change Value to Reference</a></div>
                                                                                </div>
                                            <div class="dl">
                                                            <div class="dt"><a href="/replace-type-code-with-subclasses">Replace Type Code with Subclasses</a></div>
                                                                                </div>
                                    </div>
                            <div class="col-xs-12 col-sm-6 col-lg-6">
                    <h3>Implements design pattern</h3>
                                            <div class="dl">
                                                            <div class="dt"><a href="/design-patterns/factory-method">Factory Method</a></div>
                                                                                </div>
                                    </div>
                    </div>
    </nav>
<nav class="prev-next">
                    <div class="next">
                <h4>Read next</h4>
                <a rel="next" href="/replace-error-code-with-exception" class="btn">Replace Error Code with Exception <span class="fa fa-arrow-right"></span></a>
            </div>
                            <div class="prev">
                <h4>Return</h4>
                <a rel="prev" href="/hide-method" class="btn"><span class="fa fa-arrow-left"></span> Hide Method </a>
            </div>
            </nav>
</div>
<aside class="feature content-secondary">
    <div class="prom banner-sidebar" data-id="Ref: Sidebar" data-creative-id="standard-sidebar-en" data-position="sidebar">
    <div class="ban">
        <div class="image product-image">
            <span class="banner-discount">Sale!</span>
            <a href="/refactoring/course"><img src="/images/refactoring/course/course-cover-en.jpg"></a>
        </div>
        <div class="banner-text">
            <p class="ta-center">This refactoring is part of the much bigger <b>Refactoring Course</b>.</p>
            <a href="/refactoring/course" class="btn btn-featured btn-block">
                <i class="fa fa-star" aria-hidden="true"></i> Learn more...</a>
        </div>
    </div>
</div>


</aside>
                    </div>
    </main>

    <nav class="navigation" role="navigation">
    <div class="navigation-container">
        <a href="#" class="navigation-toggle"><i class="fa fa-bars"></i></a>
        <a class="navigation-brand" href="/">
            <img alt="Refactoring.Guru" src="/images/content-public/logos/logo-new-mobile.png" srcset="/images/content-public/logos/logo-new-mobile-2x.png 2x, /images/content-public/logos/logo-new-mobile-3x.png 3x">
        </a>
        <ul class="navigation-menu navigation-chapters">
            <li >
                <a href="/ru/refactoring" title="Рефакторинг">Рефакторинг</a>
            </li>
            <li >
                <a href="/ru/design-patterns" title="Паттерны проектирования">Паттерны</a>
            </li>
        </ul>
        <div class="social-likes-block" data-url="https://refactoring.guru">
    <div data-service="facebook" class="facebook" title="Share on Facebook">Facebook</div>
        <div data-service="plusone" class="plusone" title="Share on Google+">Google+</div>
    <div data-servi§ce="twitter" class="twitter" title="Share on Twitter">Twitter</div>
</div>        <ul class="navigation-menu">
                        <li class="dropdown hidden-lg-up">
                <a class="dropdown-toggle" type="button" id="dropdownLanguage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-globe" aria-hidden="true"></i> <span class="caption hidden-lg-down">Language</span>
                </a>
                <div class="dropdown-menu" aria-labelledby="dropdownLanguage">
                                                                        <a href="https://refactoring.guru/replace-constructor-with-factory-method" class="dropdown-item locale-link" data-locale="en" title="English">English</a>
                                                    <a href="https://refactoring.guru/ru/replace-constructor-with-factory-method" class="dropdown-item locale-link" data-locale="ru" title="Русский">Русский</a>
                                                    <a href="https://refactoring.guru/uk/replace-constructor-with-factory-method" class="dropdown-item locale-link" data-locale="uk" title="Українська">Українська</a>
                                                                                                                                                                                                                    </div>
            </li>
                        <li class="nav-contact">
                <a class="userecho-private" href="https://feedback.refactoring.guru/?show_feedback_form_private=true" rel="nofollow" title="Contact us">
                    <i class="fa fa-envelope"></i> <span class="caption hidden-lg-down">Contact us</span>
                </a>
            </li>
                            <li class="nav-login">
                    <a href="/auth/login" title="Log in"><i class="fa fa-user"></i> <span class="caption hidden-lg-down">Log in</span></a>
                </li>
                    </ul>
    </div>
</nav>
    <aside class="sidebar main-menu nano">
    <a href="#" class="navigation-toggle"><i class="fa fa-fw fa-times"></i></a>
    <div class="nano-content">
                    <div class="main-menu-lang hidden-md-down">
                                                            <a href="https://refactoring.guru/replace-constructor-with-factory-method" class="locale-link active" data-locale="en" title="English">English</a>
                                            <a href="https://refactoring.guru/ru/replace-constructor-with-factory-method" class="locale-link " data-locale="ru" title="Русский">Русский</a>
                                            <a href="https://refactoring.guru/uk/replace-constructor-with-factory-method" class="locale-link " data-locale="uk" title="Українська">Українська</a>
                                                                                                                                                                            </div>
        
        <a class="menu-brand" href="/">
                            <img width=200 height=241 alt="Refactoring.Guru" src="/images/content-public/logos/logo-new.png" srcset="/images/content-public/logos/logo-new-2x.png 2x, /images/content-public/logos/logo-new-3x.png 3x">
                    </a>

        <div class="menu-container" style="position: relative">
                        <ul class="menu-list">
                    <li class="featured">
    <a href="/store">
        <i class="fa fa-fw fa-star" aria-hidden="true"></i> Premium content
    </a>
    </li>                    <li class="trail">
    <a href="/refactoring">
        <i class="fa fa-fw fa-scissors" aria-hidden="true"></i> Refactoring
    </a>
            <ul class="">
                    <li class="">
    <a href="/refactoring/what-is-refactoring">
        What is Refactoring
    </a>
    </li>                    <li class="">
    <a href="/refactoring/catalog">
        Catalog
    </a>
    </li>                    <li class="">
    <a href="/refactoring/smells">
        Code Smells
    </a>
    </li>                    <li class="trail">
    <a href="/refactoring/techniques">
        Refactorings
    </a>
            <ul class="">
                    <li class="">
    <a href="/refactoring/techniques/composing-methods">
        Composing Methods
    </a>
    </li>                    <li class="">
    <a href="/refactoring/techniques/moving-features-between-objects">
        Moving Features between Objects
    </a>
    </li>                    <li class="">
    <a href="/refactoring/techniques/organizing-data">
        Organizing Data
    </a>
    </li>                    <li class="">
    <a href="/refactoring/techniques/simplifying-conditional-expressions">
        Simplifying Conditional Expressions
    </a>
    </li>                    <li class="trail">
    <a href="/refactoring/techniques/simplifying-method-calls">
        Simplifying Method Calls
    </a>
            <ul class="">
                    <li class="">
    <a href="/rename-method">
        Rename Method
    </a>
    </li>                    <li class="">
    <a href="/add-parameter">
        Add Parameter
    </a>
    </li>                    <li class="">
    <a href="/remove-parameter">
        Remove Parameter
    </a>
    </li>                    <li class="">
    <a href="/separate-query-from-modifier">
        Separate Query from Modifier
    </a>
    </li>                    <li class="">
    <a href="/parameterize-method">
        Parameterize Method
    </a>
    </li>                    <li class="">
    <a href="/replace-parameter-with-explicit-methods">
        Replace Parameter with Explicit Methods
    </a>
    </li>                    <li class="">
    <a href="/preserve-whole-object">
        Preserve Whole Object
    </a>
    </li>                    <li class="">
    <a href="/replace-parameter-with-method-call">
        Replace Parameter with Method Call
    </a>
    </li>                    <li class="">
    <a href="/introduce-parameter-object">
        Introduce Parameter Object
    </a>
    </li>                    <li class="">
    <a href="/remove-setting-method">
        Remove Setting Method
    </a>
    </li>                    <li class="">
    <a href="/hide-method">
        Hide Method
    </a>
    </li>                    <li class="trail active">
    <a href="/replace-constructor-with-factory-method">
        Replace Constructor with Factory Method
    </a>
    </li>                    <li class="">
    <a href="/replace-error-code-with-exception">
        Replace Error Code with Exception
    </a>
    </li>                    <li class="">
    <a href="/replace-exception-with-test">
        Replace Exception with Test
    </a>
    </li>            </ul>
    </li>                    <li class="">
    <a href="/refactoring/techniques/dealing-with-generalization">
        Dealing with Generalization
    </a>
    </li>            </ul>
    </li>            </ul>
    </li>                    <li class="">
    <a href="/design-patterns">
        <i class="fa fa-fw fa-puzzle-piece" aria-hidden="true"></i> Design Patterns
    </a>
    </li>            </ul>
        </div>
        <div class="sidebar-controls">
            <div class="sidebar-controls-container">
                <a href="/home" title="Log in"><i
                            class="fa fa-fw fa-fw fa-user"></i> Log in</a>
                <a href="https://feedback.refactoring.guru/" class="userecho-public" rel="nofollow" title="Feedback"><i class="fa fa-fw fa-fw fa-envelope-o" aria-hidden="true"></i> Feedback</a>
            </div>
        </div>
    </div>
</aside>
    <footer class="footer center-content">
    <div class="footer-container center-content-container">
        <div class="footer-inner container-fluid">
            <div class="row">
                <div class="col-sm-8">
                    <ul class="footer-list">
                        <li><a href="/">Home</a></li>
                        <li><a href="/refactoring">Refactoring</a></li>
                        <li><a href="/design-patterns">Design Patterns</a></li>
                                                    <li><a href="/refactoring/course">Premium Content</a></li>
                                                <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-public">Forum</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-private">Contact us</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <ul class="footer-iconic-list">
                        <li><a href="https://www.facebook.com/refactoring.guru"><i class="fa fa-facebook-square"></i></a></li>
                        <li><a href="http://eepurl.com/XBZq5" rel="nofollow"><i class="fa fa-envelope-o" aria-hidden="true"></i></a></li>
                        <li><a href="https://github.com/RefactoringGuru"><i class="fa fa-github-alt"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright center-content-container">
        <div class="row">
            <div class="col-sm-6">
                © 2014-2018 <a href="/">Refactoring.Guru</a><span class="hidden-sm-down">. </span><br class="hidden-md-up">All rights reserved.<br>
                                    Illustrations by <a href="http://zhart.us/" rel="nofollow">Dmitry&nbsp;Zhart</a>
                            </div>
            <div class="col-sm-6" style="text-align: right">
                                    <a href="/terms">Terms</a> / <a href="/privacy-policy">Privacy Policy</a>
                
            </div>
        </div>
    </div>
</footer>

    <script>
function extend() {
    var extended = {};
    var deep = false;
    var i = 0;
    var length = arguments.length;
    if ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {
        deep = arguments[0];
        i++;
    }
    var merge = function (obj) {
        for ( var prop in obj ) {
            if ( Object.prototype.hasOwnProperty.call( obj, prop ) ) {
                // If deep merge and property is an object, merge properties
                if ( deep && Object.prototype.toString.call(obj[prop]) === '[object Object]' ) {
                    extended[prop] = extend( true, extended[prop], obj[prop] );
                } else {
                    extended[prop] = obj[prop];
                }
            }
        }
    };
    for ( ; i < length; i++ ) {
        var obj = arguments[i];
        merge(obj);
    }
    return extended;
}
</script>
<script>
+function(script_defaults) {
    for (var property in script_defaults) {
        if (window[property] !== null && typeof window[property] === 'object') {
            window[property] = extend(true, window[property], script_defaults[property])
        }
        else {
            window[property] = script_defaults[property];
        }
    }
}({"locale":"en","locale_prefix":"","user_echo_alias":"refactoring","user_echo_host":"feedback.refactoring.guru","user_echo_private_forum":2,"user_echo_locale":"en","user_echo_public_forum":3,"user_echo_public_forum_url":"https://feedback.refactoring.guru/","user_echo_sso_token":""});
</script>

    <script>
    window.socialLikesButtons = {
        facebook: {
            counterUrl: "https://refactoring.guru/social-likes/facebook?url=https%3A%2F%2Frefactoring.guru&url2=http%3A%2F%2Frefactoring.guru",
            convertNumber: null
        },
        plusone: {
            counterUrl: "https://refactoring.guru/social-likes/google?url=https%3A%2F%2Frefactoring.guru&url2=http%3A%2F%2Frefactoring.guru",
            convertNumber: null
        },
        vkontakte: {
            counterUrl: "https://refactoring.guru/social-likes/vk?url=https%3A%2F%2Frefactoring.guru&url2=http%3A%2F%2Frefactoring.guru",
            counter: null
        },
    };
</script>

<script src="https://refactoring.guru/js/public.min.js?id=0a7f60141e1b0de0fa1e"></script>

<script>
    if (window.dataLayer && window.google_optimize) {
        window.dataLayer.push({'event': 'optimize.activate'});
    }
</script>
</body>
</html><!-- Cached on 2018-12-11 14-15-22 -->
